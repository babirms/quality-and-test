package com.fullteaching.backend.comment;

import static org.mockito.Mockito.mock;

import java.util.ArrayList;
import java.util.List;

import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;

import com.fullteaching.backend.user.User;


public class CommentTest {
	@Test
	public void criaCommentVazio() {
		Comment c = new Comment();
		Assertions.assertEquals(0, c.getId());
	}
	
	@Test
	public void criaCommentComInfo() {
		// cria comment 
		User user = mock(User.class);
		Comment c = new Comment(
				"esta é uma mensagem", 
				55555,
				user
				);
		
		// verifica 		
		Assertions.assertEquals("esta é uma mensagem", c.getMessage());
		Assertions.assertEquals(55555, c.getDate());
		Assertions.assertEquals(user, c.getUser());
	}
	
	@Test
	public void criaCommentComSets() {
		// cria comment
		User user = mock(User.class);
		String message = "teste";
		long date = 5555;
		
		// instância comment vazio
		Comment comment = new Comment();
		
		// seta propriedades
		comment.setDate(date);
		comment.setMessage(message);
		comment.setUser(user);
		comment.setId(10);
		
		// verifica 		
		Assertions.assertEquals(message, comment.getMessage());
		Assertions.assertEquals(date, comment.getDate());
		Assertions.assertEquals(user, comment.getUser());
		Assertions.assertEquals(10, comment.getId());
	}
	
	
	@Test
	public void criaCommentComUserECommentParent() {
		// cria comment normal
		User user = mock(User.class);
		String message = "comment normal";
		long date = 555;
		Comment comment = new Comment(message, date, user);
		Assertions.assertEquals(message, comment.getMessage());
		Assertions.assertEquals(date, comment.getDate());
		
		// cria comment pai
		User userParent = mock(User.class);
		String messageParent = "comment pai";
		long dateParent = 999;
		Comment commentParent = new Comment(messageParent, dateParent, userParent, comment);
		Assertions.assertEquals(messageParent, commentParent.getMessage());
		Assertions.assertEquals(dateParent, commentParent.getDate());
		
		// relaciona comments
		comment.setCommentParent(commentParent);
		Assertions.assertEquals(commentParent, comment.getCommentParent());
	}
	
	
	@Test
	public void testeCommentReplies() {
		// cria comment 
		User user = mock(User.class);
		String message = "comment normal";
		long date = 555;
		Comment comment = new Comment(message, date, user);
		
		// cria comment 2
		User user2 = mock(User.class);
		String message2 = "comment reply";
		long date2 = 9999;
		Comment comment2 = new Comment(message2, date2, user2);
		
		// cria lista de comments
		List<Comment> listComment = new ArrayList<Comment>();
		listComment.add(comment2);
		
		// implementa lista de comments no primeiro comment
		comment.setReplies(listComment);
		Assertions.assertEquals(listComment, comment.getReplies());
	}
}
